<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-tag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoWin Pro | Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --primary: #00ff88; 
            --danger: #ff4444; 
            --bg: #0a0a0a;
            --accent: #00d4ff;
        }
        
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }

        body {
            margin: 0; background: var(--bg); color: white;
            display: flex; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© Ø£Ù„ÙˆØ§Ù† Ù…ØªØ­Ø±ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        .bg-animate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #0f3460);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-container {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%; max-width: 450px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            position: relative;
        }

        /* Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© */
        .lang-btn {
            position: absolute; top: -50px; left: 50%; transform: translateX(-50%);
            background: rgba(255,255,255,0.1); border: none; color: white;
            padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.8rem;
        }

        .stats { display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: bold; }
        .lives { color: var(--danger); font-size: 1.3rem; letter-spacing: 2px; }

        /* Ø§Ù„Ø£ÙØªØ§Ø± (Ø§Ù„ÙƒØ±ØªÙˆÙ† Ø§Ù„Ù…ØªÙØ§Ø¹Ù„) */
        #avatar { 
            font-size: 70px; display: block; margin: 10px auto; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .jump { animation: jump 0.5s ease; }
        .shake { animation: shake 0.4s ease; }
        @keyframes jump { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-30px) scale(1.1);} }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-12px);} 75% {transform: translateX(12px);} }

        #timer { font-size: 3rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 15px var(--primary); margin: 10px 0; }
        
        input {
            width: 100%; padding: 15px; border-radius: 15px; border: 2px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3); color: white; text-align: center; font-size: 1.2rem;
            transition: 0.3s;
        }
        input:focus { border-color: var(--primary); outline: none; background: rgba(0,0,0,0.5); }

        .btn {
            background: var(--primary); color: #000; padding: 15px; border-radius: 50px;
            border: none; font-weight: 900; cursor: pointer; width: 100%; font-size: 1.1rem;
            box-shadow: 0 10px 20px rgba(0,255,136,0.3); transition: 0.3s;
        }
        .btn:active { transform: scale(0.95); }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="bg-animate"></div>

    <div class="game-container" id="main-card">
        <button class="lang-btn" onclick="toggleLang()">English / Ø¹Ø±Ø¨ÙŠ</button>
        
        <div id="login-screen">
            <span id="avatar">ğŸ‘‹</span>
            <h2 id="welcome-msg">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ GoWin</h2>
            <input type="text" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
            <button class="btn" style="margin-top:15px" onclick="initGame()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
        </div>

        <div id="play-screen" class="hidden">
            <div class="stats">
                <span id="display-name">---</span>
                <span class="lives" id="lives-display">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</span>
            </div>
            <span id="avatar-play">ğŸ¤”</span>
            <h3 id="question-text">Ø§Ø³ØªØ¹Ø¯...</h3>
            <div id="timer">0.00</div>
            <input type="text" id="answer-input" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©...">
        </div>

        <div id="result-screen" class="hidden">
            <span id="avatar-result">ğŸ†</span>
            <h1 id="rank-name">Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©</h1>
            <p id="score-text"></p>
            <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
        </div>
    </div>

    <audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>
    <audio id="snd-win" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

    <script>
        let lang = 'ar';
        let lives = 5;
        let qIndex = 0;
        let timer;
        let time = 0;
        let isPlaying = false;

        const content = {
            ar: {
                welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¨Ø·ÙˆÙ„Ø© GoWin",
                placeholder: "Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...",
                questions: [
                    {q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", a: "Ø§Ù„Ø±ÙŠØ§Ø¶"},
                    {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­ØŸ", a: "7"},
                    {q: "Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ø¢Ø³ÙŠØ§"},
                    {q: "Ù…Ø§Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø¨Ø­Ø±ØŸ", a: "Ø§Ø²Ø±Ù‚"}
                ],
                ranks: ["Ø¨Ø·Ù„ Ø®Ø§Ø±Ù‚ âš¡", "Ø°ÙƒÙŠ Ø¬Ø¯Ø§Ù‹ ğŸ§ ", "Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ ğŸ†", "Ù†ÙŠÙ†Ø¬Ø§ Ø³Ø±ÙŠØ¹ ğŸ¥·"]
            },
            en: {
                welcome: "Welcome to GoWin Championship",
                placeholder: "Type your name...",
                questions: [
                    {q: "What is the capital of USA?", a: "Washington"},
                    {q: "How many legs does a spider have?", a: "8"},
                    {q: "What is the color of grass?", a: "Green"},
                    {q: "10 minus 3 equals?", a: "7"}
                ],
                ranks: ["The GOAT ğŸ", "Mastermind ğŸ“", "Speed Demon âš¡", "World Class ğŸŒ"]
            }
        };

        function toggleLang() {
            lang = lang === 'ar' ? 'en' : 'ar';
            document.getElementById('html-tag').dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('welcome-msg').innerText = content[lang].welcome;
            document.getElementById('username').placeholder = content[lang].placeholder;
        }

        function initGame() {
            const name = document.getElementById('username').value;
            if(!name) return alert(lang === 'ar' ? "Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ!" : "Please enter your name!");
            
            localStorage.setItem('gowin_player', name);
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            document.getElementById('display-name').innerText = name;
            
            startChallenge();
        }

        function startChallenge() {
            isPlaying = true;
            loadNextQuestion();
            timer = setInterval(() => {
                time += 0.01;
                document.getElementById('timer').innerText = time.toFixed(2);
            }, 10);
        }

        function loadNextQuestion() {
            const qList = content[lang].questions;
            if(qIndex < qList.length) {
                document.getElementById('question-text').innerText = qList[qIndex].q;
                document.getElementById('avatar-play').innerText = "ğŸ¤”";
                document.getElementById('answer-input').value = "";
                document.getElementById('answer-input').focus();
            } else {
                finishGame(true);
            }
        }

        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if(e.key === 'Enter' && isPlaying) {
                const userAns = document.getElementById('answer-input').value.trim().toLowerCase();
                const correctAns = content[lang].questions[qIndex].a.toLowerCase();
                
                if(userAns === correctAns) {
                    handleCorrect();
                } else {
                    handleWrong();
                }
            }
        });

        function handleCorrect() {
            document.getElementById('snd-correct').play();
            document.getElementById('avatar-play').innerText = "ğŸ¤©";
            document.getElementById('avatar-play').classList.add('jump');
            setTimeout(() => document.getElementById('avatar-play').classList.remove('jump'), 500);
            qIndex++;
            loadNextQuestion();
        }

        function handleWrong() {
            lives--;
            document.getElementById('snd-wrong').play();
            document.getElementById('avatar-play').innerText = "ğŸ˜­";
            document.getElementById('avatar-play').classList.add('shake');
            if(navigator.vibrate) navigator.vibrate([100, 50, 100]); // Ø§Ù‡ØªØ²Ø§Ø²
            
            document.getElementById('lives-display').innerText = "â¤ï¸".repeat(lives);
            setTimeout(() => document.getElementById('avatar-play').classList.remove('shake'), 400);
            
            if(lives <= 0) finishGame(false);
        }

        function finishGame(win) {
            isPlaying = false;
            clearInterval(timer);
            document.getElementById('play-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            if(win) {
                document.getElementById('snd-win').play();
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                const ranks = content[lang].ranks;
                document.getElementById('rank-name').innerText = ranks[Math.floor(Math.random()*ranks.length)];
                document.getElementById('score-text').innerText = (lang === 'ar' ? "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ: " : "Record Time: ") + time.toFixed(2) + "s";
                document.getElementById('avatar-result').innerText = "ğŸ†";
            } else {
                document.getElementById('rank-name').innerText = lang === 'ar' ? "Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹" : "Game Over";
                document.getElementById('score-text').innerText = lang === 'ar' ? "Ù†ÙØ°Øª Ù…Ù†Ùƒ Ø§Ù„Ø­ÙŠÙˆØ§Øª!" : "You ran out of lives!";
                document.getElementById('avatar-result').innerText = "ğŸ’€";
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        if(localStorage.getItem('gowin_player')) {
            document.getElementById('username').value = localStorage.getItem('gowin_player');
        }
    </script>
</body>
</html>

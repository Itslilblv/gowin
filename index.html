<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoWin Pro | Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        
        :root { --primary: #00ff88; --danger: #ff4444; --bg: #050505; }
        
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }

        body {
            margin: 0; background: var(--bg); color: white;
            display: flex; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© Ø£Ù„ÙˆØ§Ù† Ù…ØªØ­Ø±ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        .bg-animate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #0f3460);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-card {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%; max-width: 420px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .lives { color: var(--danger); font-size: 1.2rem; filter: drop-shadow(0 0 5px var(--danger)); }

        #avatar { font-size: 80px; display: block; margin: 10px auto; transition: 0.3s; }
        
        #timer { 
            font-size: 3.5rem; font-weight: 900; color: var(--primary); 
            text-shadow: 0 0 20px rgba(0,255,136,0.5); font-family: monospace;
        }

        input {
            width: 100%; padding: 15px; border-radius: 15px; border: 2px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3); color: white; text-align: center; font-size: 1.3rem; margin: 20px 0;
        }
        input:focus { border-color: var(--primary); outline: none; }

        .btn {
            background: var(--primary); color: black; padding: 15px; border-radius: 50px;
            border: none; font-weight: 900; cursor: pointer; width: 100%; font-size: 1.2rem;
            box-shadow: 0 10px 20px rgba(0,255,136,0.3);
        }

        .hidden { display: none; }
        
        /* Ø­Ø±ÙƒØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ */
        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-10px);} 75% {transform: translateX(10px);} }
        .jump { animation: jump 0.5s ease; }
        @keyframes jump { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-25px);} }
    </style>
</head>
<body>
    <div class="bg-animate"></div>

    <div class="game-card" id="start-screen">
        <span style="font-size: 60px;">ğŸ®</span>
        <h1 style="margin: 10px 0;">GoWin Pro</h1>
        <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø± Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</p>
        <input type="text" id="player-name-input" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø·Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ">
        <button class="btn" onclick="initGame()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div class="game-card hidden" id="play-screen">
        <div class="stats">
            <span id="display-name" style="font-weight: bold;">---</span>
            <span class="lives" id="lives-box">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</span>
        </div>
        <span id="avatar">ğŸ¤”</span>
        <h2 id="question-text">Ø§Ø³ØªØ¹Ø¯...</h2>
        <div id="timer">0.00</div>
        <input type="text" id="answer-input" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...">
    </div>

    <div class="game-card hidden" id="result-screen">
        <span id="res-emoji" style="font-size: 80px;">ğŸ†</span>
        <h1 id="res-title">ÙƒÙÙˆ ÙŠØ§ Ø¨Ø·Ù„!</h1>
        <p id="res-desc"></p>
        <button class="btn" onclick="location.reload()">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>
    </div>

    <audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>
    <audio id="snd-win" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

    <script>
        let lives = 5; let qIndex = 0; let time = 0; let timer; let isActive = false;
        
        const quiz = [
            {q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", a: "Ø§Ù„Ø±ÙŠØ§Ø¶"},
            {q: "Ù…Ø§Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø²Ù…Ø±Ø¯ØŸ", a: "Ø§Ø®Ø¶Ø±"},
            {q: "5 + 10 * 2ØŸ", a: "25"},
            {q: "Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ø§Ù„ÙÙ‡Ø¯"}
        ];

        function initGame() {
            const name = document.getElementById('player-name-input').value.trim();
            if(!name) return alert("Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
            
            localStorage.setItem('gowin_user', name);
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            document.getElementById('display-name').innerText = name;
            
            startRound();
        }

        function startRound() {
            isActive = true;
            loadQuestion();
            timer = setInterval(() => {
                time += 0.01;
                document.getElementById('timer').innerText = time.toFixed(2);
            }, 10);
        }

        function loadQuestion() {
            if(qIndex < quiz.length) {
                document.getElementById('question-text').innerText = quiz[qIndex].q;
                document.getElementById('avatar').innerText = "ğŸ¤”";
                document.getElementById('answer-input').value = "";
                document.getElementById('answer-input').focus();
            } else {
                finish(true);
            }
        }

        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if(e.key === 'Enter' && isActive) {
                const userAns = document.getElementById('answer-input').value.trim();
                if(userAns === quiz[qIndex].a) {
                    // ØµØ­
                    document.getElementById('snd-correct').play();
                    document.getElementById('avatar').innerText = "ğŸ¤©";
                    document.getElementById('avatar').classList.add('jump');
                    setTimeout(() => document.getElementById('avatar').classList.remove('jump'), 500);
                    qIndex++;
                    loadQuestion();
                } else {
                    // Ø®Ø·Ø£
                    lives--;
                    document.getElementById('snd-wrong').play();
                    document.getElementById('avatar').innerText = "ğŸ˜­";
                    document.getElementById('play-screen').classList.add('shake');
                    if(navigator.vibrate) navigator.vibrate(200);
                    document.getElementById('lives-box').innerText = "â¤ï¸".repeat(lives);
                    setTimeout(() => document.getElementById('play-screen').classList.remove('shake'), 400);
                    document.getElementById('answer-input').value = "";
                    if(lives <= 0) finish(false);
                }
            }
        });

        function finish(win) {
            isActive = false;
            clearInterval(timer); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆÙ‚ÙŠØª
            document.getElementById('play-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            if(win) {
                document.getElementById('snd-win').play();
                confetti({ particleCount: 150, spread: 70 });
                document.getElementById('res-title').innerText = "Ø£Ø³Ø·ÙˆØ±Ø©! ğŸ†";
                document.getElementById('res-desc').innerText = `Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© ÙÙŠ ${time.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
            } else {
                document.getElementById('res-emoji').innerText = "ğŸ’€";
                document.getElementById('res-title').innerText = "Ø®Ø³Ø±Øª Ø§Ù„Ø­ÙŠÙˆØ§Øª!";
                document.getElementById('res-desc').innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ØªØ­Ø·ÙŠÙ… Ø§Ù„Ø£Ø±Ù‚Ø§Ù…";
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³Ù…
        if(localStorage.getItem('gowin_user')) {
            document.getElementById('player-name-input').value = localStorage.getItem('gowin_user');
        }
    </script>
</body>
</html>

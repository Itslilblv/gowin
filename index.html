<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoWin Pro | Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #00ff88; --danger: #ff4444; --bg: #0a0a0a; }
        body {
            font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden; transition: 0.3s;
        }
        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ù…Ø·ÙˆØ±Ø© */
        .bg-animate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(45deg, #0f0c29, #302b63, #24243e);
            background-size: 400% 400%; animation: gradient 15s ease infinite;
        }
        @keyframes gradient { 0% {background-position: 0% 50%;} 50% {background-position: 100% 50%;} 100% {background-position: 0% 50%;} }

        .game-container {
            background: rgba(255,255,255,0.05); backdrop-filter: blur(15px);
            padding: 30px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.1);
            width: 85%; max-width: 450px; text-align: center;
        }
        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; }
        .lives { color: var(--danger); font-size: 1.2rem; }
        
        /* Ø§Ù„ÙƒØ±ØªÙˆÙ† Ø§Ù„Ù…ØªÙØ§Ø¹Ù„ */
        #avatar { font-size: 80px; transition: 0.5s transform; margin-bottom: 10px; display: block; }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-10px);} 75% {transform: translateX(10px);} }
        .jump { animation: jump 0.5s; }
        @keyframes jump { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-20px);} }

        #timer { font-size: 2.5rem; color: var(--primary); font-family: monospace; }
        input {
            width: 100%; padding: 15px; border-radius: 12px; border: none; margin: 20px 0;
            background: rgba(255,255,255,0.1); color: white; text-align: center; font-size: 1.2rem;
        }
        .btn {
            background: var(--primary); color: #000; padding: 12px 25px; border-radius: 50px;
            border: none; font-weight: bold; cursor: pointer; width: 100%;
        }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="bg-animate"></div>

    <div class="game-container" id="login-box">
        <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ GoWin ğŸ†</h2>
        <p>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø± Ù„Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©:</p>
        <input type="text" id="username" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØµÙ‚Ø± Ø§Ù„ØªØ­Ø¯ÙŠ">
        <button class="btn" onclick="saveUser()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div class="game-container hidden" id="game-box">
        <div class="stats">
            <div id="player-name">---</div>
            <div class="lives" id="lives">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</div>
        </div>
        <span id="avatar">ğŸ¤”</span>
        <h3 id="question">Ø§Ø³ØªØ¹Ø¯...</h3>
        <div id="timer">0.00</div>
        <input type="text" id="answer" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§...">
    </div>

    <div class="game-container hidden" id="result-box">
        <h1 id="final-rank">---</h1>
        <p id="final-score"></p>
        <button class="btn" onclick="location.reload()">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>
    </div>

    <audio id="s-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="s-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>
    <audio id="s-win" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

    <script>
        let lives = 5; let qIndex = 0; let timer; let time = 0;
        const questions = [
            {q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", a: "Ø§Ù„Ø±ÙŠØ§Ø¶"},
            {q: "5 + 10 * 2ØŸ", a: "25"},
            {q: "Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ø§Ù„Ù‡Ø§Ø¯ÙŠ"},
            {q: "Ù„ÙˆÙ† Ø§Ù„Ø²Ù…Ø±Ø¯ØŸ", a: "Ø§Ø®Ø¶Ø±"}
        ];

        // Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø²
        function saveUser() {
            let name = document.getElementById('username').value;
            if(name) {
                localStorage.setItem('gowin_user', name);
                startActualGame();
            }
        }

        window.onload = () => {
            if(localStorage.getItem('gowin_user')) {
                document.getElementById('username').value = localStorage.getItem('gowin_user');
            }
        };

        function startActualGame() {
            document.getElementById('login-box').className = 'hidden';
            document.getElementById('game-box').classList.remove('hidden');
            document.getElementById('player-name').innerText = localStorage.getItem('gowin_user');
            loadQuestion();
            timer = setInterval(() => { time += 0.01; document.getElementById('timer').innerText = time.toFixed(2); }, 10);
        }

        function loadQuestion() {
            if(qIndex < questions.length) {
                document.getElementById('question').innerText = questions[qIndex].q;
                document.getElementById('avatar').innerText = "ğŸ¤”";
            } else {
                gameOver(true);
            }
        }

        document.getElementById('answer').addEventListener('keyup', (e) => {
            if(e.key === 'Enter') {
                let userAns = document.getElementById('answer').value.trim();
                if(userAns === questions[qIndex].a) {
                    correct();
                } else {
                    wrong();
                }
            }
        });

        function correct() {
            document.getElementById('s-correct').play();
            document.getElementById('avatar').innerText = "ğŸ¤©";
            document.getElementById('avatar').classList.add('jump');
            setTimeout(() => document.getElementById('avatar').classList.remove('jump'), 500);
            qIndex++;
            document.getElementById('answer').value = "";
            loadQuestion();
        }

        function wrong() {
            lives--;
            document.getElementById('s-wrong').play();
            document.getElementById('avatar').innerText = "ğŸ˜­";
            document.getElementById('avatar').classList.add('shake');
            if(navigator.vibrate) navigator.vibrate(200); // Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ø¬ÙˆØ§Ù„
            setTimeout(() => document.getElementById('avatar').classList.remove('shake'), 500);
            document.getElementById('lives').innerText = "â¤ï¸".repeat(lives);
            document.getElementById('answer').value = "";
            if(lives <= 0) gameOver(false);
        }

        function gameOver(isWin) {
            clearInterval(timer);
            document.getElementById('game-box').className = 'hidden';
            document.getElementById('result-box').classList.remove('hidden');
            if(isWin) {
                document.getElementById('s-win').play();
                confetti({particleCount: 200});
                document.getElementById('final-rank').innerText = "Ø£Ø³Ø·ÙˆØ±Ø©! ğŸ†";
                document.getElementById('final-score').innerText = `Ø§Ù„ÙˆÙ‚Øª: ${time.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
            } else {
                document.getElementById('final-rank').innerText = "Ø®Ø³Ø±Øª! ğŸ’€";
                document.getElementById('final-score').innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© Ù„ØªØ¯Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù";
            }
        }
    </script>
</body>
</html>

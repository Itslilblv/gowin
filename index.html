<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoWin Pro | Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        :root { --primary: #00ff88; --danger: #ff4444; --bg: #050505; }
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }

        body {
            margin: 0; background: var(--bg); color: white;
            display: flex; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
        }

        /* 1. Ø®Ù„ÙÙŠØ© Ø£Ù„ÙˆØ§Ù† Ù…ØªØ­Ø±ÙƒØ© */
        .bg-animate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #0f3460);
            background-size: 400% 400%; animation: gradientBG 10s ease infinite;
        }
        @keyframes gradientBG { 0% {background-position:0% 50%} 50% {background-position:100% 50%} 100% {background-position:0% 50%} }

        .game-card {
            background: rgba(255, 255, 255, 0.07); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%; max-width: 420px; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        /* 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙŠÙˆØ§Øª (5 Ù‚Ù„ÙˆØ¨) */
        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .lives { color: var(--danger); font-size: 1.2rem; filter: drop-shadow(0 0 5px var(--danger)); }

        /* 3. Ø§Ù„ÙƒØ±ØªÙˆÙ† Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ */
        #avatar { font-size: 80px; display: block; margin: 10px auto; transition: 0.3s; }
        
        /* 4. Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
        #timer { font-size: 3.5rem; font-weight: 900; color: var(--primary); font-family: monospace; }

        input {
            width: 100%; padding: 15px; border-radius: 15px; border: 2px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3); color: white; text-align: center; font-size: 1.3rem; margin: 20px 0;
        }

        .btn {
            background: var(--primary); color: black; padding: 15px; border-radius: 50px;
            border: none; font-weight: 900; cursor: pointer; width: 100%; font-size: 1.2rem;
        }

        .hidden { display: none; }
        .shake { animation: shake 0.4s; }
        @keyframes shake { 0%,100% {transform:translateX(0)} 25% {transform:translateX(-10px)} 75% {transform:translateX(10px)} }
        .jump { animation: jump 0.5s; }
        @keyframes jump { 0%,100% {transform:translateY(0)} 50% {transform:translateY(-25px)} }
    </style>
</head>
<body>
    <div class="bg-animate"></div>

    <div class="game-card" id="start-box">
        <h1 id="welcome-title">Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø¯Ø£Øª!</h1>
        <p>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…Ù†Ø§ÙØ³Ø© ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù:</p>
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±...">
        <button class="btn" onclick="startTheGame()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div class="game-card hidden" id="game-box">
        <div class="stats">
            <span id="player-display"></span>
            <span class="lives" id="lives-display">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</span>
        </div>
        <span id="avatar">ğŸ¤”</span>
        <h2 id="question">ØªØ­Ù…ÙŠÙ„...</h2>
        <div id="timer">0.00</div>
        <input type="text" id="answer" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...">
    </div>

    <div class="game-card hidden" id="result-box">
        <span id="res-emoji" style="font-size: 80px;">ğŸ†</span>
        <h1 id="res-title"></h1>
        <p id="res-time"></p>
        <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>

    <audio id="s-correct" src="https://www.myinstants.com/media/sounds/correct.mp3"></audio>
    <audio id="s-wrong" src="https://www.myinstants.com/media/sounds/wrong-answer.mp3"></audio>
    <audio id="s-win" src="https://www.myinstants.com/media/sounds/success-fanfare-trumpets.mp3"></audio>

    <script>
        let lives = 5; let qIndex = 0; let time = 0; let timer;
        const questions = [
            {q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", a: "Ø§Ù„Ø±ÙŠØ§Ø¶"},
            {q: "5 + 10 * 2ØŸ", a: "25"},
            {q: "Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ø§Ù„Ù‡Ø§Ø¯ÙŠ"},
            {q: "Ù„ÙˆÙ† ØºØ§Ø¨Ø© Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†ØŸ", a: "Ø§Ø®Ø¶Ø±"}
        ];

        function startTheGame() {
            let name = document.getElementById('username').value;
            if(!name) return alert("Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
            localStorage.setItem('gowin_player', name);
            document.getElementById('start-box').classList.add('hidden');
            document.getElementById('game-box').classList.remove('hidden');
            document.getElementById('player-display').innerText = name;
            loadQ();
            // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙˆÙ‚ÙŠØª
            timer = setInterval(() => { time += 0.01; document.getElementById('timer').innerText = time.toFixed(2); }, 10);
        }

        function loadQ() {
            if(qIndex < questions.length) {
                document.getElementById('question').innerText = questions[qIndex].q;
                document.getElementById('avatar').innerText = "ğŸ¤”";
                document.getElementById('answer').value = "";
                document.getElementById('answer').focus();
            } else {
                end(true);
            }
        }

        document.getElementById('answer').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                let ans = document.getElementById('answer').value.trim();
                if(ans === questions[qIndex].a) {
                    // ØµØ­: ÙØ±Ø­Ø© + ØµÙˆØª + ÙƒØ±ØªÙˆÙ† ÙŠØ±Ù‚Øµ
                    document.getElementById('s-correct').play();
                    document.getElementById('avatar').innerText = "ğŸ¤©";
                    document.getElementById('avatar').classList.add('jump');
                    setTimeout(() => { document.getElementById('avatar').classList.remove('jump'); qIndex++; loadQ(); }, 500);
                } else {
                    // Ø®Ø·Ø£: Ø²Ø¹Ù„ + ØµÙˆØª + Ø§Ù‡ØªØ²Ø§Ø² + Ù†Ù‚Øµ Ù‚Ù„Ø¨
                    lives--;
                    document.getElementById('s-wrong').play();
                    document.getElementById('avatar').innerText = "ğŸ˜­";
                    document.getElementById('game-box').classList.add('shake');
                    if(navigator.vibrate) navigator.vibrate(200); // 6. Ø§Ù‡ØªØ²Ø§Ø²
                    document.getElementById('lives-display').innerText = "â¤ï¸".repeat(lives);
                    setTimeout(() => document.getElementById('game-box').classList.remove('shake'), 400);
                    document.getElementById('answer').value = "";
                    if(lives <= 0) end(false);
                }
            }
        });

        function end(win) {
            clearInterval(timer); // 7. Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆÙ‚ÙŠØª
            document.getElementById('game-box').classList.add('hidden');
            document.getElementById('result-box').classList.remove('hidden');
            if(win) {
                document.getElementById('s-win').play();
                confetti({particleCount: 150});
                document.getElementById('res-title').innerText = "ÙƒÙÙˆ ÙŠØ§ Ø¨Ø·Ù„!";
                document.getElementById('res-time').innerText = "ÙˆÙ‚ØªÙƒ: " + time.toFixed(2) + " Ø«Ø§Ù†ÙŠØ©";
            } else {
                document.getElementById('res-emoji').innerText = "ğŸ’€";
                document.getElementById('res-title').innerText = "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­ÙŠÙˆØ§Øª!";
                document.getElementById('res-time').innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© Ù„ÙƒØ³Ø± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ";
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        if(localStorage.getItem('gowin_player')) {
            document.getElementById('username').value = localStorage.getItem('gowin_player');
        }
    </script>
</body>
</html>

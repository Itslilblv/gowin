<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoWin Pro | Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #00ff88; --danger: #ff4444; --bg: #0a0a0a; }
        body {
            font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0;
            display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden;
        }
        .bg-animate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #0f3460);
            background-size: 400% 400%; animation: gradientBG 10s ease infinite;
        }
        @keyframes gradientBG { 0% {background-position:0% 50%} 50% {background-position:100% 50%} 100% {background-position:0% 50%} }

        .game-container {
            background: rgba(255,255,255,0.08); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1);
            width: 90%; max-width: 400px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .stats { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .lives { color: var(--danger); font-size: 1.2rem; }
        #avatar { font-size: 70px; display: block; transition: 0.3s; }
        #timer { font-size: 3rem; font-weight: 900; color: var(--primary); margin: 10px 0; font-family: monospace; }
        input {
            width: 100%; padding: 15px; border-radius: 15px; border: none;
            background: rgba(255,255,255,0.1); color: white; text-align: center; font-size: 1.2rem;
        }
        .btn {
            background: var(--primary); color: #000; padding: 15px; border-radius: 50px;
            border: none; font-weight: bold; width: 100%; cursor: pointer; font-size: 1.1rem;
        }
        .hidden { display: none; }
        .shake { animation: shake 0.4s; }
        @keyframes shake { 0%, 100% {transform:translateX(0)} 25% {transform:translateX(-10px)} 75% {transform:translateX(10px)} }
    </style>
</head>
<body>
    <div class="bg-animate"></div>

    <div class="game-container" id="login-box">
        <span style="font-size: 50px;">ğŸ†</span>
        <h2>Ø¨Ø·ÙˆÙ„Ø© GoWin</h2>
        <input type="text" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©...">
        <button class="btn" style="margin-top:20px" onclick="startGame()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div class="game-container hidden" id="game-box">
        <div class="stats">
            <span id="p-name"></span>
            <span class="lives" id="lives">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</span>
        </div>
        <span id="avatar">ğŸ¤”</span>
        <h3 id="question">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h3>
        <div id="timer">0.00</div>
        <input type="text" id="ans-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø¶ØºØ· Enter">
    </div>

    <div class="game-container hidden" id="result-box">
        <span id="res-avatar" style="font-size: 80px;">ğŸ†</span>
        <h2 id="res-title"></h2>
        <p id="res-time"></p>
        <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <audio id="snd-correct" src="https://www.myinstants.com/media/sounds/correct.mp3"></audio>
    <audio id="snd-wrong" src="https://www.myinstants.com/media/sounds/wrong-answer.mp3"></audio>
    <audio id="snd-win" src="https://www.myinstants.com/media/sounds/success-fanfare-trumpets.mp3"></audio>

    <script>
        let lives = 5; let qIndex = 0; let time = 0; let timerInterval;
        const questions = [
            {q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", a: "Ø§Ù„Ø±ÙŠØ§Ø¶"},
            {q: "5 + 15ØŸ", a: "20"},
            {q: "Ù„ÙˆÙ† ØºØ§Ø¨Ø© Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†ØŸ", a: "Ø§Ø®Ø¶Ø±"},
            {q: "Ù…Ù„Ùƒ Ø§Ù„ØºØ§Ø¨Ø©ØŸ", a: "Ø§Ù„Ø§Ø³Ø¯"}
        ];

        function startGame() {
            let user = document.getElementById('username').value;
            if(!user) return alert("Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
            localStorage.setItem('gowin_user', user);
            document.getElementById('login-box').classList.add('hidden');
            document.getElementById('game-box').classList.remove('hidden');
            document.getElementById('p-name').innerText = user;
            nextQ();
            runTimer();
        }

        function runTimer() {
            timerInterval = setInterval(() => {
                time += 0.01;
                document.getElementById('timer').innerText = time.toFixed(2);
            }, 10);
        }

        function nextQ() {
            if(qIndex < questions.length) {
                document.getElementById('question').innerText = questions[qIndex].q;
                document.getElementById('ans-input').value = "";
                document.getElementById('ans-input').focus();
            } else {
                endGame(true);
            }
        }

        document.getElementById('ans-input').addEventListener('keypress', function(e) {
            if(e.key === 'Enter') {
                let val = this.value.trim();
                if(val === questions[qIndex].a) {
                    // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ù„Ù„ØªÙˆÙ‚ÙŠØª Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„
                    document.getElementById('snd-correct').play();
                    document.getElementById('avatar').innerText = "ğŸ¤©";
                    qIndex++;
                    setTimeout(nextQ, 300);
                } else {
                    document.getElementById('snd-wrong').play();
                    document.getElementById('avatar').innerText = "ğŸ˜­";
                    document.getElementById('game-box').classList.add('shake');
                    setTimeout(() => document.getElementById('game-box').classList.remove('shake'), 400);
                    lives--;
                    document.getElementById('lives').innerText = "â¤ï¸".repeat(lives);
                    if(lives <= 0) endGame(false);
                }
            }
        });

        function endGame(win) {
            clearInterval(timerInterval); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆÙ‚ÙŠØª Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
            document.getElementById('game-box').classList.add('hidden');
            document.getElementById('result-box').classList.remove('hidden');
            if(win) {
                document.getElementById('snd-win').play();
                confetti({particleCount: 150});
                document.getElementById('res-title').innerText = "ÙƒÙÙˆ! Ø£Ù†Øª Ø¨Ø·Ù„";
                document.getElementById('res-time').innerText = "Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© ÙÙŠ: " + time.toFixed(2) + " Ø«Ø§Ù†ÙŠØ©";
            } else {
                document.getElementById('res-avatar').innerText = "ğŸ’€";
                document.getElementById('res-title').innerText = "Ù„Ù„Ø£Ø³Ù Ø®Ø³Ø±Ù†Ø§ Ø§Ù„Ø¨Ø·Ù„";
                document.getElementById('res-time').innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© Ù„ÙƒØ³Ø± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ";
            }
        }
    </script>
</body>
</html>
